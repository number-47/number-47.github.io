<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Keep calm and carry on"><meta name="keywords" content><meta name="author" content="Number 47,820368938@qq.com"><meta name="copyright" content="Number 47"><title>Keep calm and carry on | Number 47</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">Number 47</div><div class="author-info__description text-center">Keep calm and carry on</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">20</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">10</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">6</span></a></div></div></div><nav class="no-bg" id="nav"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Number 47</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/ || home">home</a><a class="site-page" href="/tags/ || tags">tags</a><a class="site-page" href="/categories/ || th">categories</a><a class="site-page" href="/archives/ || archive">archives</a><a class="site-page" href="/about/ || user">about</a></span></div><div id="site-info"><div id="site-title">Number 47</div><div id="site-sub-title">Keep calm and carry on</div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/24/专项课18-旅游场景/">专项课18 旅游场景</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/流利说/">流利说</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/专项课/">专项课</a></span><div class="content"><h1 id="专项课18-旅游场景"><a href="#专项课18-旅游场景" class="headerlink" title="专项课18 旅游场景"></a>专项课18 旅游场景</h1><p>I’d like a room. 我想开一个房间。</p>
<p>I’d like to reserve a room. 我想开一个房间。</p>
<p>Do you have a reservation? 你有预定吗？</p>
<h2 id="part1：酒店英文"><a href="#part1：酒店英文" class="headerlink" title="part1：酒店英文"></a>part1：酒店英文</h2><h3 id="out-of…表示什么没了"><a href="#out-of…表示什么没了" class="headerlink" title="out of…表示什么没了"></a>out of…表示什么没了</h3><p>eg:We’re out of <strong>shampoo</strong> and <strong>shower gel</strong>.我们没有洗发水和沐浴露了。</p>
<h3 id="I‘d-like-表示想要什么"><a href="#I‘d-like-表示想要什么" class="headerlink" title="I‘d like ..表示想要什么"></a>I‘d like ..表示想要什么</h3><p>And I’d like an <strong>extra blanket</strong> and <strong>towel</strong>. 我还要一条毯子和毛巾。</p>
<h3 id="sth-doesn’t-work-表示什么东西坏了。"><a href="#sth-doesn’t-work-表示什么东西坏了。" class="headerlink" title="sth doesn’t work 表示什么东西坏了。"></a>sth doesn’t work 表示什么东西坏了。</h3><p>eg: The AC doesn’t work.空调坏了。</p>
<p>The TV doesn’t work./The TV set doesn’t work.电视机坏了。</p>
<p>The TV: 电视机或电视机节目</p>
<p>The TV set: 电视机机器（更为准确）</p>
<p>My <strong>key card</strong> doesn’t work. 我的房卡坏了。</p>
<h3 id="send-someone-表示叫人-派人-送人"><a href="#send-someone-表示叫人-派人-送人" class="headerlink" title="send someone 表示叫人/派人/送人"></a>send someone 表示叫人/派人/送人</h3><p><strong>check it out</strong> 看一看，看一下 </p>
<p>Could you send someone to check it out? 你们能不能派个人过来看看？</p>
<p>Could you send someone to pick up the food tray? 能叫个人收一下餐盘吗？</p>
<p>Hi,I’am going out and I’ll be back in the evening,can you send someone to clean my room?</p>
<p>我就要出门，晚上回来，你能派人做一下房间清理吗？</p>
<h2 id="Part2-：交通出行"><a href="#Part2-：交通出行" class="headerlink" title="Part2 ：交通出行"></a>Part2 ：交通出行</h2><h3 id="请求酒店帮忙预定出租车"><a href="#请求酒店帮忙预定出租车" class="headerlink" title="请求酒店帮忙预定出租车"></a>请求酒店帮忙预定出租车</h3><p>Can you <strong>book</strong> a taxi for me? I’d like to go to Times Square tomorrow morning at 9.</p>
<p>你能帮我预定一辆出租车吗？我明天早上九点要去时代广场。</p>
<h3 id="自己打车，跟司机交流"><a href="#自己打车，跟司机交流" class="headerlink" title="自己打车，跟司机交流"></a>自己打车，跟司机交流</h3><p>Where are you heading to? 你去哪儿？</p>
<p>Where to? 去哪儿？</p>
<p>get in上车</p>
<h3 id="赶时间"><a href="#赶时间" class="headerlink" title="赶时间"></a>赶时间</h3><p>I’m really in a hurry. Is there a <strong>shortcut</strong>? 问司机有没有小路/捷径可以快点？</p>
<p>tap on:刷卡上车</p>
<p>tap off:刷卡下车</p>
<h2 id="Part3：求助外国人"><a href="#Part3：求助外国人" class="headerlink" title="Part3：求助外国人"></a>Part3：求助外国人</h2><h2 id="拍照时提出自己的小需求"><a href="#拍照时提出自己的小需求" class="headerlink" title="拍照时提出自己的小需求"></a>拍照时提出自己的小需求</h2><p>Excuse me, can you take a photo for us please? 不好意思，你能帮我们拍张照吗？</p>
<p>Can/Could you take that building in please? 你能帮我把那个建筑拍进去吗？</p>
<h3 id="借手机打电话"><a href="#借手机打电话" class="headerlink" title="借手机打电话"></a>借手机打电话</h3><p>Excuse me, <strong>my phone is dead</strong>, Can I use you phone for a sec. I can’t find my friend, and I need to make a call.</p>
<p>不好意思，我手机没电了，能借你手机打个电话吗？很快的，我找不到我朋友了，需要打个电话。</p>
<h3 id="找人帮忙给手机充电"><a href="#找人帮忙给手机充电" class="headerlink" title="找人帮忙给手机充电"></a>找人帮忙给手机充电</h3><p>Can you help me charge my phone? It’s dead. 你能帮我充电吗？没电了</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/24/spring security学习（一）-spring boot 整合/">spring security 学习(一)-spring boot 整合</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Spring-Security/">Spring Security</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Spring-Security/">Spring Security</a></span><div class="content"><h1 id="Spring-Security-一-Spring-Boot-整合"><a href="#Spring-Security-一-Spring-Boot-整合" class="headerlink" title="Spring Security(一)-Spring Boot 整合"></a>Spring Security(一)-Spring Boot 整合</h1><h2 id="创建spring-boot项目，引入spring-boot-start-security"><a href="#创建spring-boot项目，引入spring-boot-start-security" class="headerlink" title="创建spring boot项目，引入spring-boot-start-security"></a>创建spring boot项目，引入spring-boot-start-security</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">          &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<h2 id="创建-spring-security的访问接口"><a href="#创建-spring-security的访问接口" class="headerlink" title="创建/spring-security的访问接口"></a>创建/spring-security的访问接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"spring-security"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">hello</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"hello spring security"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="表单认证"><a href="#表单认证" class="headerlink" title="表单认证"></a>表单认证</h2><p>创建配置类WebSecurityConfig继承<code>WebSecurityConfigurerAdapter</code>,<code>WebSecurityConfigurerAdapter</code>是由Spring Security提供的Web应用安全配置的适配器。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSecurityConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		http.formLogin() <span class="comment">// 表单方式</span></span><br><span class="line">				.and()</span><br><span class="line">				.authorizeRequests() </span><br><span class="line">				.anyRequest()  <span class="comment">// 所有请求</span></span><br><span class="line">				.authenticated(); <span class="comment">// 都需要认证</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设置启动端口"><a href="#设置启动端口" class="headerlink" title="设置启动端口"></a>设置启动端口</h2><p>application.properties</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=8081</span><br></pre></td></tr></table></figure>

<p>启动程序，启动时控制台Using generated security password: 9aac6105-0752-4bf1-9f54-c247e94086ab，每次都不一样，这个为用户user的密码。<br>访问<a href="http://localhost:8080/spring-security" target="_blank" rel="noopener">http://localhost:8080/spring-security</a>，页面跳转到<a href="http://localhost:8080/login" target="_blank" rel="noopener">http://localhost:8080/login</a><br><img src="http://ww1.sinaimg.cn/large/a8a26f7cgy1g7x16jb1ylj20i709tmxe.jpg" alt="image.png"><br>登录后，访问到<a href="http://localhost:8080/spring-security" target="_blank" rel="noopener">http://localhost:8080/spring-security</a></p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/24/Spring Security/">spring security</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Spring-Security/">Spring Security</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Spring-Security/">Spring Security</a></span><div class="content"><h1 id="Spring-Security"><a href="#Spring-Security" class="headerlink" title="Spring Security"></a>Spring Security</h1><h2 id="核心功能"><a href="#核心功能" class="headerlink" title="核心功能"></a>核心功能</h2><ol>
<li>认证（你是谁）</li>
<li>授权（你能干什么）</li>
<li>攻击防护（防止伪造身份）</li>
</ol>
<h2 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h2><p><img src="https://ws1.sinaimg.cn/large/a8a26f7cgy1g6dlcukl6rj20yq0a777q.jpg" alt></p>
<h2 id="用户名-密码"><a href="#用户名-密码" class="headerlink" title="用户名+密码"></a>用户名+密码</h2><h2 id="手机号-短信认证"><a href="#手机号-短信认证" class="headerlink" title="手机号+短信认证"></a>手机号+短信认证</h2></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/10/24/Spring Security(二)-自定义登录页登录与退出/">spring security 学习(二)-自定义登录页登录与退出</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-10-24</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Spring-Security/">Spring Security</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Spring-Security/">Spring Security</a></span><div class="content"><h1 id="Spring-Security-二-自定义登录页登录与退出"><a href="#Spring-Security-二-自定义登录页登录与退出" class="headerlink" title="Spring Security(二)-自定义登录页登录与退出"></a>Spring Security(二)-自定义登录页登录与退出</h1></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/18/Rest API的拦截/">Rest API的拦截</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-18</time><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Rest/">Rest</a></span><div class="content"><h1 id="Rest-API的拦截"><a href="#Rest-API的拦截" class="headerlink" title="Rest API的拦截"></a>Rest API的拦截</h1><h2 id="拦截顺序"><a href="#拦截顺序" class="headerlink" title="拦截顺序"></a>拦截顺序</h2><p>filter-&gt;Interceptor-&gt;Aspect</p>
<h2 id="异常捕获顺序"><a href="#异常捕获顺序" class="headerlink" title="异常捕获顺序"></a>异常捕获顺序</h2><p>Aspect-&gt;ControllerAdvice-&gt;Inteceptor-&gt;filter</p>
<p><img src="https://ws1.sinaimg.cn/large/a8a26f7cgy1g64bpl7z8qj20dt0cb761.jpg" alt></p>
<h2 id="过滤器（Filter）"><a href="#过滤器（Filter）" class="headerlink" title="过滤器（Filter）"></a>过滤器（Filter）</h2><p>可以获取到原始http请求和响应的信息，但是取不到处理方法的信息</p>
<h3 id="自定义Filter-spring-boot添加-Component"><a href="#自定义Filter-spring-boot添加-Component" class="headerlink" title="自定义Filter spring boot添加@Component"></a>自定义Filter spring boot添加@Component</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.number47.com.number47.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> number47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/8/18 23:44</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Rest API filter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"time filter init"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"time filter start"</span>);</span><br><span class="line">		<span class="keyword">long</span> start = <span class="keyword">new</span> Date().getTime();</span><br><span class="line">		filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">		System.out.println(<span class="string">"time filter："</span> + (<span class="keyword">new</span> Date().getTime()-start));</span><br><span class="line">		System.out.println(<span class="string">"time filter finish"</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"time filter destroy"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="加入第三方Filter-spring-boot"><a href="#加入第三方Filter-spring-boot" class="headerlink" title="加入第三方Filter spring boot"></a>加入第三方Filter spring boot</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">package com.number47.com.number47.config;</span><br><span class="line"></span><br><span class="line">import com.number47.com.number47.filter.TimeFilter;</span><br><span class="line">import org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line">import org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author number47</span><br><span class="line"> * @date 2019/8/18 23:53</span><br><span class="line"> * @description</span><br><span class="line"> */</span><br><span class="line">@Configuration</span><br><span class="line">public class WebConfig &#123;</span><br><span class="line">   </span><br><span class="line">   @Bean</span><br><span class="line">   public FilterRegistrationBean timeFilter()&#123;</span><br><span class="line">      FilterRegistrationBean registrationBean = new FilterRegistrationBean();</span><br><span class="line">      TimeFilter timeFilter = new TimeFilter();</span><br><span class="line">      registrationBean.setFilter(timeFilter);</span><br><span class="line">      List&lt;String&gt; urls = new ArrayList&lt;&gt;();</span><br><span class="line">      urls.add(&quot;/*&quot;);</span><br><span class="line">      registrationBean.setUrlPatterns(urls);</span><br><span class="line">      return registrationBean;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="拦截器-Interceptor"><a href="#拦截器-Interceptor" class="headerlink" title="拦截器(Interceptor)"></a>拦截器(Interceptor)</h1><p>可以获取到原始http请求和响应的信息，可以获取处理方法的信息，但是获取不到参数的值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.number47.com.number47.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.HandlerMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> number47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/8/19 00:01</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimeInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * controller 之前调用</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletRequest</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletResponse</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> handle</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object handle)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"preHandle"</span>);</span><br><span class="line">      System.out.println(((HandlerMethod)handle).getBean().getClass().getName());</span><br><span class="line">      System.out.println(((HandlerMethod)handle).getMethod().getName());</span><br><span class="line">      httpServletRequest.setAttribute(<span class="string">"startTime"</span>,<span class="keyword">new</span> Date().getTime());</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * controller 方法处理之后调用，如果controller抛出异常，这个方法不会调用</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletRequest</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletResponse</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"postHandle"</span>);</span><br><span class="line">      Long start = (Long)httpServletRequest.getAttribute(<span class="string">"startTime"</span>);</span><br><span class="line">      System.out.println(<span class="string">"time interceptor 耗时："</span> + (<span class="keyword">new</span> Date().getTime() - start));</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * controller 无论是正常还是抛出异常都会调用</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletRequest</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> httpServletResponse</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> o</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">      System.out.println(<span class="string">"afterCompletion"</span>);</span><br><span class="line">      Long start = (Long)httpServletRequest.getAttribute(<span class="string">"startTime"</span>);</span><br><span class="line">      System.out.println(<span class="string">"time interceptor 耗时："</span> + (<span class="keyword">new</span> Date().getTime() - start));</span><br><span class="line">      System.out.println(<span class="string">"exception is "</span> + e);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.number47.com.number47.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.number47.com.number47.filter.TimeFilter;</span><br><span class="line"><span class="keyword">import</span> com.number47.com.number47.interceptor.TimeInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> number47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2019/8/18 23:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebConfig</span> <span class="keyword">extends</span> <span class="title">WebMvcConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> TimeInterceptor timeInterceptor;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> </span>&#123;</span><br><span class="line">      registry.addInterceptor(timeInterceptor);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="切片-Aspect"><a href="#切片-Aspect" class="headerlink" title="切片(Aspect)"></a>切片(Aspect)</h1><p>获取不到原始http请求和响应的信息，可以获取参数的值</p>
<h4 id="Spring-Aop简介"><a href="#Spring-Aop简介" class="headerlink" title="Spring Aop简介"></a>Spring Aop简介</h4><p><img src="https://ws1.sinaimg.cn/large/a8a26f7cgy1g64an6t14gj20pi0c7wik.jpg" alt></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">package com.number47.aspect;</span><br><span class="line"></span><br><span class="line">import org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line">import org.aspectj.lang.annotation.*;</span><br><span class="line">import org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * @author number47</span><br><span class="line"> * @date 2019/8/19 00:29</span><br><span class="line"> * @description</span><br><span class="line"> */</span><br><span class="line">@Aspect</span><br><span class="line">@Component</span><br><span class="line">public class TimeAspect &#123;</span><br><span class="line"></span><br><span class="line">	@Before(value = &quot;execution(* com.number47.web.controller.UserController.*(..))&quot;)</span><br><span class="line">	public void before()&#123;</span><br><span class="line">		System.out.println(&quot;方法调用之前&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@After(value = &quot;execution(* com.number47.web.controller.UserController.*(..))&quot;)</span><br><span class="line">	public void after()&#123;</span><br><span class="line">		System.out.println(&quot;方法调用之后&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@AfterThrowing(value = &quot;execution(* com.number47.web.controller.UserController.*(..))&quot;)</span><br><span class="line">	public void afterThrowing()&#123;</span><br><span class="line">		System.out.println(&quot;方法异常调用之后&quot;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Around(value = &quot;execution(* com.number47.web.controller.UserController.*(..))&quot;)</span><br><span class="line">	public Object around(ProceedingJoinPoint proceedingJoinPoint) throws Throwable &#123;</span><br><span class="line">		System.out.println(&quot;time aspect start&quot;);</span><br><span class="line">		long start = new Date().getTime();</span><br><span class="line">		Object object = proceedingJoinPoint.proceed();</span><br><span class="line">		Object[] args = proceedingJoinPoint.getArgs();</span><br><span class="line">		for (Object arg: args)&#123;</span><br><span class="line">			System.out.println(&quot;arg is &quot; + arg);</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(&quot;time aspect：&quot; + (new Date().getTime()-start));</span><br><span class="line">		System.out.println(&quot;包含上面所有情况&quot;);</span><br><span class="line">		System.out.println(&quot;time aspect end&quot;);</span><br><span class="line">		return object;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2019/08/03/Hibernate Validator/">Hibernate Validator</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-08-03</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Hibernate-Validator/">Hibernate Validator</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Hibernate-Validator/">Hibernate Validator</a></span><div class="content"><h1 id="Hibernate-Validator"><a href="#Hibernate-Validator" class="headerlink" title="Hibernate Validator"></a>Hibernate Validator</h1><table>
<thead>
<tr>
<th>注解</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>@Null</td>
<td>值必须为空</td>
</tr>
<tr>
<td>@Pattern(regex=)</td>
<td>字符串必须匹配正则表达式</td>
</tr>
<tr>
<td>@Size(min=,max=)</td>
<td>集合的元素数量必须在min和max之间</td>
</tr>
<tr>
<td>@CreditCardNumber(ignoreNonDigitCharacters)</td>
<td>字符串必须是信用卡号（按美国的标准验证的）</td>
</tr>
<tr>
<td>@Email</td>
<td>字符串必须是Email地址</td>
</tr>
<tr>
<td>@Length(min=,max=)</td>
<td>检查字符串的长度</td>
</tr>
<tr>
<td>@NotBlank</td>
<td>字符串必须有字符</td>
</tr>
<tr>
<td>@NotEmpty</td>
<td>字符串不为null,集合有元素</td>
</tr>
<tr>
<td>@Range(min=,max=)</td>
<td>数字必须大于等于min,小于等于max</td>
</tr>
<tr>
<td>@SafeHtml</td>
<td>字符串是安全的html</td>
</tr>
<tr>
<td>@URL</td>
<td>字符串是合法的URL</td>
</tr>
<tr>
<td>@NotNull</td>
<td>值不能为空</td>
</tr>
<tr>
<td>@AssertFalse</td>
<td>值必须为false</td>
</tr>
<tr>
<td>@AssertTrue</td>
<td>值必须为true</td>
</tr>
<tr>
<td>@DecimalMax(value=,inclusive=)</td>
<td>值必须小于等于（inclusive=true）/小于（inclusive=false）value属指定的值，可以注解在字符串类型的属性上</td>
</tr>
<tr>
<td>@DecimalMin(value=,inclusive=)</td>
<td>值必须大于等于（inclusive=true）/大于（inclusive=false）value属指定的值，可以注解在字符串类型的属性上</td>
</tr>
<tr>
<td>@Digits(integer=,fraction=)</td>
<td>数字格式检查。integer指定整数部分的最大长度，fraction指定小数部分的最大长度</td>
</tr>
<tr>
<td>@Future</td>
<td>值必须是未来的日期</td>
</tr>
<tr>
<td>@Past</td>
<td>值必须是过去的日期</td>
</tr>
<tr>
<td>@Max(value=)</td>
<td>值必须小于等于value指定的值。不能注解在字符串类型的属性上。</td>
</tr>
<tr>
<td>@Min(value=)</td>
<td>值必须大于等于value指定的值。不能注解在字符串类型的属性上。</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="通过-Valid-BindingResult使用校验-JsonView指定属性的显示"><a href="#通过-Valid-BindingResult使用校验-JsonView指定属性的显示" class="headerlink" title="通过@Valid,BindingResult使用校验/@JsonView指定属性的显示"></a>通过@Valid,BindingResult使用校验/@JsonView指定属性的显示</h2><p>Public class User{</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface UserSimpleView&#123;&#125;;</span><br><span class="line"></span><br><span class="line">public interface UserDetailView extends UserSimpleView&#123;&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@NotBlank</span>校验不为空</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="meta">@NotBlank</span></span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span> String userName;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonView</span>(UserSimpleView.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUserName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> userName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserName</span><span class="params">(String userName)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.userName = userName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@JsonView</span>(UserDetailView.class)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> password;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.password = password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>}</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="meta">@PostMapping</span></span><br><span class="line">	<span class="meta">@JsonView</span>(User.UserSimpleView.class) <span class="comment">//显示名称</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">userCreate</span><span class="params">(@Valid @RequestBody User user, BindingResult errors)</span></span>&#123;</span><br><span class="line">		<span class="comment">//捕获没有通过校验的错误</span></span><br><span class="line">		<span class="keyword">if</span> (errors.hasErrors())&#123;</span><br><span class="line">			errors.getAllErrors().stream().forEach(error -&gt; System.out.println(error.getDefaultMessage()));</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(user.getId());</span><br><span class="line">		System.out.println(user.getUserName());</span><br><span class="line">		System.out.println(user.getPassword());</span><br><span class="line">		System.out.println(user.getBirthDay());</span><br><span class="line">		user.setId(<span class="string">"1"</span>);</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">	 *</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@param</span> userId 通过正则表达式 只能接受数字</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@GetMapping</span>(<span class="string">"/&#123;id:\\d+&#125;"</span>)</span><br><span class="line">	<span class="meta">@JsonView</span>(User.UserDetailView.class) <span class="comment">//显示名称和密码</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> User <span class="title">getInfo</span><span class="params">(@PathVariable(name = <span class="string">"id"</span>)</span> String userId)</span>&#123;</span><br><span class="line">		User user = <span class="keyword">new</span> User();</span><br><span class="line">		user.setUserName(<span class="string">"JOJO"</span>);</span><br><span class="line">		<span class="keyword">return</span> user;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/01/10/导入CachedRowSetlmpl报错/">导入import com.sun.rowset.CachedRowSetImpl，报错</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-10</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/JAVA-Web问题/">JAVA Web问题</a></span><div class="content"><h2 id="报错内容"><a href="#报错内容" class="headerlink" title="报错内容"></a>报错内容</h2><p>Access restriction: The type CachedRowSetImpl is not accessible due to restriction on required library C:\glassfish3\jdk7\jre\lib\rt.jar</p>
<h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>项目右键project build path中先移除JRE System Library，再添加库JRE System Library，之后就可以了。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/01/07/Servlet/">Servlet</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java-Web/">Java_Web</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Servlet/">Servlet</a></span><div class="content"><h2 id="doGet"><a href="#doGet" class="headerlink" title="doGet()"></a>doGet()</h2><p>当浏览器使用get方式提交数据的时候，servlet需要提供doGet()方法。<br><strong>哪些是get方式呢？</strong></p>
<ul>
<li>form默认的提交方式</li>
<li>如果通过一个超链访问某个地址</li>
<li>如果在地址栏直接输入某个地址</li>
<li>ajax指定使用get方式的时候<h2 id="doPost"><a href="#doPost" class="headerlink" title="doPost()"></a>doPost()</h2>当浏览器使用post方式提交数据的时候，servlet需要提供doPost()方法</li>
</ul>
<p><strong>哪些是post方式呢？</strong></p>
<ul>
<li>在form上显示设置 method=”post”的时候</li>
<li>ajax指定post方式的时候<h2 id="service"><a href="#service" class="headerlink" title="service()"></a>service()</h2>在执行doGet()或者doPost()之前，都会先执行service()。<br>由service()方法进行判断，到底该调用doGet()还是doPost()。<br>可以发现，service(), doGet(), doPost() 三种方式的参数列表都是一样的。<br>所以，有时候也会直接重写service()方法，在其中提供相应的服务，就不用区分到底是get还是post了。</li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>一个Servlet的生命周期由 实例化，初始化，提供服务，销毁，被回收几个步骤组成。</p>
<h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><p>request对象的类是HttpServletRequest，提供了很多有实用价值的方法。</p>
<h3 id="request常见方法"><a href="#request常见方法" class="headerlink" title="request常见方法"></a>request常见方法</h3><p>request.getRequestURL(): 浏览器发出请求时的完整URL，包括协议 主机名 端口(如果有)”<br>request.getRequestURI(): 浏览器发出请求的资源名部分，去掉了协议和主机名” +<br>request.getQueryString(): 请求行中的参数部分，只能显示以get方式发出的参数，post方式的看不到<br>request.getRemoteAddr(): 浏览器所处于的客户机的IP地址<br>request.getRemoteHost(): 浏览器所处于的客户机的主机名<br>request.getRemotePort(): 浏览器所处于的客户机使用的网络端口<br>request.getLocalAddr(): 服务器的IP地址<br>request.getLocalName(): 服务器的主机名<br>request.getMethod(): 得到客户机请求方式一般是GET或者POST。</p>
<h3 id="获取参数"><a href="#获取参数" class="headerlink" title="获取参数"></a>获取参数</h3><p>request.getParameter(): 是常见的方法，用于获取单值的参数<br>request.getParameterValues(): 用于获取具有多值得参数，比如注册的时候提交的爱好，可以使多选的。<br>request.getParameterMap(): 用于遍历所有的参数，并返回Map类型。</p>
<h3 id="获取头信息"><a href="#获取头信息" class="headerlink" title="获取头信息"></a>获取头信息</h3><p>request.getHeader() 获取浏览器传递过来的头信息。<br>比如getHeader(“user-agent”) 可以获取浏览器的基本资料，这样就能判断是firefox、IE、chrome、或者是safari浏览器<br>request.getHeaderNames() 获取浏览器所有的头信息名称，根据头信息名称就能遍历出所有的头信息。</p>
<h2 id="response"><a href="#response" class="headerlink" title="response"></a>response</h2><p>response是HttpServletResponse的实例，用于提供给浏览器的响应信息。</p>
<h3 id="设置响应内容"><a href="#设置响应内容" class="headerlink" title="设置响应内容"></a>设置响应内容</h3><p>response.getWriter()</p>
<p>通过response.getWriter(); 获取一个PrintWriter 对象。<br>可以使用println(),append(),write(),format()等等方法设置返回给浏览器的html内容。</p>
</div><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/01/02/理解IO流/">IO流</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-02</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Java基础/">Java基础</a></span><div class="content"><h2 id="流的分类"><a href="#流的分类" class="headerlink" title="流的分类"></a>流的分类</h2><h3 id="按流的流向"><a href="#按流的流向" class="headerlink" title="按流的流向"></a>按流的流向</h3><p>输入流：只能从中读取数据，而不能向其写入数据。</p>
<p>输出流：只能从中写入数据，而不能向其读取数据。</p>
<h3 id="按操作数据分类"><a href="#按操作数据分类" class="headerlink" title="按操作数据分类"></a>按操作数据分类</h3><p>字符流：数据单元16位的字符。Reader和Writer作为基类。</p>
<p>字节流：数据单元8位的字节。InputStream和OutputStream作为基类。</p></div><a class="more" href="/2018/01/02/理解IO流/#more">Read more</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/01/01/IO—File类/">IO流——File类</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-01-01</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/Java/">Java</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/Java基础/">Java基础</a></span><div class="content"><h2 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h2><h3 id="创建文件对象"><a href="#创建文件对象" class="headerlink" title="创建文件对象"></a>创建文件对象</h3><p><strong>注：</strong>只是创建File对象，以下程序并不会在文件系统中创建这些目录或文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package io;</span><br><span class="line">import java.io.File;</span><br><span class="line">public class CreateFile &#123;</span><br><span class="line">	public static void main(String[] args) &#123;</span><br><span class="line">		// 绝对路径</span><br><span class="line">        File f1 = new File(&quot;d:/TestFolder&quot;);</span><br><span class="line">        System.out.println(&quot;f1的绝对路径：&quot; + f1.getAbsolutePath());</span><br><span class="line">        // 相对路径,相对于工作目录，如果在eclipse中，就是项目目录</span><br><span class="line">        File f2 = new File(&quot;text.exe&quot;);</span><br><span class="line">        System.out.println(&quot;f2的绝对路径：&quot; + f2.getAbsolutePath());</span><br><span class="line">        // 把f1作为父目录创建文件对象</span><br><span class="line">        File f3 = new File(f1, &quot;text.exe&quot;);</span><br><span class="line">        System.out.println(&quot;f3的绝对路径：&quot; + f3.getAbsolutePath());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/01/01/IO—File类/#more">Read more</a><hr></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2019 By Number 47</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>